#nginx

# nginx入门

## 安装
https://www.nginx.com/resources/wiki/start/topics/tutorials/install/


### mac安装
安装后提示
```shell
Docroot is: /opt/homebrew/var/www

The default port has been set in /opt/homebrew/etc/nginx/nginx.conf to 8080 so that
nginx can run without sudo.

nginx will load all files in /opt/homebrew/etc/nginx/servers/.

To restart nginx after an upgrade:
  brew services restart nginx
Or, if you don't want/need a background service you can just run:
  /opt/homebrew/opt/nginx/bin/nginx -g daemon off;
```


## 快速入门
https://nginx.org/en/docs/beginners_guide.html

默认安装路径 `/usr/local/nginx`

# 架构
是一个master进程，多个worker进程的模型。
master进程负责维护配置、管理worker进程。
worker进程实际处理请求。

## 配置
分类
- 核心配置
	- 事件配置
	- http配置
- 模块配置

### 配置位置
> The way nginx and its modules work is determined in the configuration file. By default, the configuration file is named `nginx.conf` and placed in the directory `/usr/local/nginx/conf`, `/etc/nginx`, or `/usr/local/etc/nginx`.

- `/usr/local/nginx/conf`
- `/etc/nginx`
- `/usr/local/etc/nginx`
- 

安装后，默认在`/usr/local/nginx/conf`下，并且默认的主配置是`nginx.fong`

```shell
0 % tree /usr/local/nginx/conf
/usr/local/nginx/conf
├── fastcgi.conf
├── fastcgi.conf.default
├── fastcgi_params
├── fastcgi_params.default
├── koi-utf
├── koi-win
├── mime.types
├── mime.types.default
├── nginx.conf
├── nginx.conf.default
├── scgi_params
├── scgi_params.default
├── uwsgi_params
├── uwsgi_params.default
└── win-utf
```

### 配置格式
```
domain {
	domain{
	}
	directive directive_value;
	
}
```

### 常见domain
- main 全局
- events 
- http
- upstream
- server
- location
- stream
- types
- if


# 配置写法

```nginx
config_name config_value, config_value;
```


# 引入其他配置文件

```nginx
include mime.types
include vhost/*conf;
```